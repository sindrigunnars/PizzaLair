{% extends 'clear_base.html' %}
{% block content %}

    <style>
    .review-order {
        display: flex;
    }
    .review-pizza {
        display: flex;
        flex-direction: column;
        flex-shrink: 2;
        justify-content: space-between;
        align-items: stretch;
        padding: 10px;
        gap: 10px;
    }
    .review-item {
        display: flex;
        border-bottom: solid lightgray;
        border-radius: 2%;
        background-color: #f8f9fa;
        padding: 10px;
        align-content: baseline;
    }
    .title-img {
        display: flex;
        justify-content: space-between;
    }
    #review-img {
        display: inline;
        margin-left: 30px;
        width: 50px;
        height: 50px;
    }
    .title-img h4 {
        margin-left: 10px;
    }

    .review-amount {
        border: #cccccc solid thin;
        padding: 5px 20px;
    }

    .review-offer {
        display: flex;
        flex-direction: column;
        flex-shrink: 2;
        justify-content: space-between;
        align-items: stretch;
        padding: 10px;
        gap: 10px;
    }
    .review-offer-pizza {
        margin-left: 10px;
    }
    .order-summary {
        display: flex;
        flex-direction: column;
        width: 50%;
        margin-top: 100px;
        margin-left: 30px;
        gap: 10px;
    }
    .customer-summary {
        display: flex;
        flex-direction: column;
        width: 50%;
        margin-top: 100px;
        margin-left: 30px;
        margin-right: 30px;
        gap: 60px;
    }

    #review-title {
        position: absolute;
        margin-top: 10px;
        margin-left: 90px;
    }
    .back-btn {
      position: absolute;
      margin-top: 5px;
      margin-left: 10px;
      align-items: center;
      background: #FFFFFF;
      border: 0 solid #E2E8F0;
      box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
      box-sizing: border-box;
      color: #1A202C;
      display: inline-flex;
      font-weight: 700;
      height: 46px;
      justify-content: center;
      line-height: 24px;
      padding: 24px;
      width: auto;
      border-radius: 8px;
    }
    .review-price {
        margin-left: auto;
    }
    .offer-name {
        display: flex;
        flex-direction: column;
    }

    .review-payment {
        display: flex;
        justify-content: space-between;
        border: #E2E8F0 solid thin;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        margin-left: 70px;

    }
    .review-contact {
        display: flex;
        justify-content: space-between;
        border: #E2E8F0 solid thin;
        box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1), 0 2px 4px -1px rgba(0, 0, 0, 0.06);
        margin-left: 70px;
    }
    .review-col-1 {
        display: flex;
        flex-direction: column;
        align-items: flex-start;
        padding: 10px;
        margin-left: 30px;
    }
    .review-col-2 {
        display: flex;
        flex-direction: column;
        align-items: flex-end;
        padding: 10px;
        margin-top: 22px;
        margin-right: 30px;
    }
    .h-5 {
        position: relative;
        margin-left: -60px;
        margin-top: -30px;
        border-radius: 2%;
        width: 200px;
    }
    .title-col-1 {
        text-align: left;
        color: #999fa4;
    }
    .title-col-2 {
        text-align: right;
        color: #999fa4;
    }

    .cust-info {
        border-bottom: solid lightgray;
        font-weight: bold;
        text-align: left;
    }
    .confirm-order {
        text-align: right;
        padding-top: 10px;
    }
    #total-price {
        font-size: larger;
        margin-bottom: 10px;
        padding-right: 20px;
    }
    #confirm-order-btn {
      background-color: #fff;
      border: 1px solid #28242c;
      border-radius: 1.5rem;
      box-sizing: border-box;
      color: #0d172a;
      cursor: pointer;
      display: inline-block;
      font-size: 1.1rem;
      font-weight: 600;
      line-height: 1;
      padding: 1rem 1.6rem;
      text-align: center;
    }

    #confirm-order-btn:hover {
      background-color: #28242c;
      color: #f8f9fa;
    }
    </style>

    <div class="review-order">
        <span><a href="{% url 'create_payment' %}"><button class="back-btn">&larr;</button></a></span>
        <h2 id="review-title">Review order</h2>
        <div class="order-summary">
            <div class="review-pizza">
                {% for item in order.pizzas.all %}
                    <div class="review-item">
                        <div class="title-img">
                            <p class="review-amount">{{ item.amount }}</p>
                            <img src="{{item.item.images.all.0.image}}" alt="Delicious lookin pizza" id="review-img"/>
                            <h4>{{ item.item.name }}</h4>
                        </div>
                        <div class="review-price">
                            <p>{{ item.item.price }} kr.</p>
                        </div>
                    </div>
                {% endfor %}
            </div>
            <div class="review-offer">
                {% for item in order.offers.all %}
                    <div class="review-item">
                        <div class="title-img">
                            <p class="review-amount">{{ item.amount }}</p>
                            <img src="{{item.item.order.image}}" alt="Offer image" id="review-img"/>
                            <div class="offer-name">
                                <h4>{{ item.item.order.name }}</h4>
                                {% for pizza in item.item.items.all %}
                                    <p class="review-offer-pizza">({{ pizza.item.name }})</p>
                                {% endfor %}
                            </div>
                        </div>
                        <div class="review-price">
                            <p>{{ item.item.order.price }} kr.</p>
                        </div>
                    </div>
                {% endfor %}
            </div>
            <div class="confirm-order">
                <h6 id="total-price">Total {{ order.price }} kr.</h6>
                <a href="{% url 'confirmation' %}"><button type="button" id="confirm-order-btn">Complete Order</button></a>
            </div>
        </div>
        <div class="customer-summary">
            <div class="review-payment">
                <div class="review-col-1">
                    <h5 class="h-5">Payment detail</h5>
                    <div>
                        <div class="title-col-1">Card number</div>
                        <p class="cust-info">{{ order.credit_card.card_number }}</p>
                    </div>
                    <div>
                        <div class="title-col-1">Cardholder</div>
                        <p class="cust-info">{{ order.credit_card.name }}</p>
                    </div>
                </div>
                <div class="review-col-2">
                    <div>
                        <div class="title-col-2">Expires</div>
                        <p class="cust-info">{{ order.credit_card.expiry | date:'m/y' }}</p>
                    </div>
                    <div>
                        <div class="title-col-2">CVC</div>
                        <p class="cust-info">{{ order.credit_card.cvc }}</p>
                    </div>
                </div>
            </div>
            <div class="review-contact">
                <div class="review-col-1">
                    <h5 class="h-5">Contact information</h5>
                    <div>
                        <div class="title-col-1">Name</div>
                        <p class="cust-info">{{ order.contact_information.name }}</p>
                    </div>
                    <div>
                        <div class="title-col-1">Street address</div>
                        <p class="cust-info">{{ order.contact_information.address }} {{ order.contact_information.house_number }}</p>
                    </div>
                </div>
                <div class="review-col-2">
                    <div>
                        <div class="title-col-2">Zip & City</div>
                        <p class="cust-info">{{ order.contact_information.zip }}, {{ order.contact_information.city }}</p>
                    </div>
                    <div>
                        <div class="title-col-2">Country</div>
                        <p class="cust-info">{{ order.contact_information.country }}</p>
                    </div>
                </div>
            </div>
        </div>
    </div>
{% endblock %}